{"name": "test_method[\\u7981\\u7528\\u89d2\\u8272 01]", "status": "failed", "statusDetails": {"message": "AssertionError: assert '无法重复禁用' == '操作成功'\n  - 操作成功\n  + 无法重复禁用", "trace": "self = <testcases.test_A.test_role.disableRole.TestCaseCommon object at 0x0000019D492E0190>\nkwargs = {'apis': [{'assert': [{'expect': 200, 'type': 'status'}, {'expect': '操作成功', 'name': 'message', 'type': 'sys'}], 'data'...isableRole'}, 'name': '禁用角色 01', 'teardown': [{'sqls': 'update ums_role set status = 1 where id = 1', 'type': 'db'}]}]}\nmy_fixture = None\n\n    @allure.feature(\"测试接口\")\n    # yaml_data数据传递给\"kwargs\",ids拿到yaml文件中具体的name名称,在运行中显示\n    @pytest.mark.parametrize(\"kwargs\", yaml_data,\n                             ids=[i['apis'][0].get(\"name\") for i in yaml_data])\n    def test_method(self, kwargs, my_fixture):\n        # 添加token和时间戳\n        kwargs = set_token_timestamp(kwargs)  # 设置请求token(可以设置不同角色)\n        # 在yaml文件中添加时间戳\n        # 打印\n        print(\"yaml传输的值\" + str(kwargs))\n        # 实例化日志记录器对象\n        self.logger = Logger()\n        self.logger.info(\"\\n\" + \"测试用例开始执行\".center(120, \"=\"))\n        # 实例化HTTPClient,用于发送请求\n        self.http_client = HTTPClient_A()\n        # 实例化MySQLClient客户端\n        self.mysql_client = MySQLClient()\n    \n        args_dict = {}\n        # 对数据（当前用例）中的所有接口进行调用,所有接口存放在一个列表当中，遍历一次处理每个接口的调用和断言\n        apis = kwargs.get(\"apis\", \"\")\n        for api in apis:\n            # 将api转换很json字符串\n            api = json.dumps(api)\n            \"\"\"\n            将api字符串使用args_dict字典进行格式化\n            类似于\"%(name)s % {\"name\": \"tom\"}\" 这样tom就会被替换到name当中\n            args_dict = {},会在set_args传入形成字典,对yaml中的\"%(asn_code)s\" % {asn_code: xxx}的方式进行传递\n            %这种方式只有在字符串的情况下,才能进行传递,所以要转化\n            \"\"\"\n            # 将api字符串使用args_dict字典进行格式化\n            api = api % args_dict\n            # 将api字符串转换成json格式的数据\n            api = json.loads(api)\n            # print(\"业务流接口\" + str(api))\n    \n            # 调用接口（发送HTTP请求）\n            r = self.http_client.request(**api.get('data'))\n            print(\"响应数值信息: \" + str(r.json()))\n            print(\"status: \" + str(r.status_code))\n            # print(\"code: \" + str(jsonpath(r.json(), \"$..code\")[0]))\n            # 处理断言部分\n            for item in api.get(\"assert\", \"\"):\n                # HTTP状态码断言\n                if item[\"type\"] == \"status\":\n                    assert (r.status_code == item[\"expect\"])\n                # 关键业务信息断言\n                elif item[\"type\"] == \"sys\":\n                    current_value = jsonpath(r.json(), \"$..\" + item['name'])\n                    if current_value:\n>                       assert (current_value[0] == item[\"expect\"])\nE                       AssertionError: assert '无法重复禁用' == '操作成功'\nE                         - 操作成功\nE                         + 无法重复禁用\n\ndisableRole.py:67: AssertionError"}, "attachments": [{"name": "log", "source": "4c5b0aae-137f-4107-bdb8-e22e5b4c0306-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "kwargs", "value": "{'apis': [{'name': '禁用角色 01', 'data': {'path': '/ums/role/disableRole', 'method': 'post', 'headers': None, 'json': {'roleIdList': [1], 'timestamp': None}}, 'assert': [{'type': 'status', 'expect': 200}, {'type': 'sys', 'name': 'message', 'expect': '操作成功'}], 'teardown': [{'type': 'db', 'sqls': 'update ums_role set status = 1 where id = 1'}]}]}"}], "start": 1685417553478, "stop": 1685417553714, "uuid": "8e5694f1-5c88-4fe3-8fd0-cec45cfca9a5", "historyId": "002b943b8293628faec5cb32eebc6076", "testCaseId": "9908dac3e5dcd9739d9d2cfbe4a52c2c", "fullName": "testcases.test_A.test_role.disableRole.TestCaseCommon#test_method", "labels": [{"name": "feature", "value": "测试接口"}, {"name": "parentSuite", "value": "testcases.test_A.test_role"}, {"name": "suite", "value": "disableRole"}, {"name": "subSuite", "value": "TestCaseCommon"}, {"name": "host", "value": "admin"}, {"name": "thread", "value": "18560-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcases.test_A.test_role.disableRole"}]}